<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>West LA Computer Expert | Fast On-Site & Remote PC Support</title>
    <meta name="description" content="West LA Computer Expert offers on-site and remote PC & network support. Call (310) 850-8093. Open daily 9am–10pm, Sunday 10am–9pm." />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#0B1220',
                            card: '#111A2E',
                            accent: '#2DD4BF',
                            muted: '#94A3B8'
                        }
                    },
                    boxShadow: {
                        glow: '0 0 40px rgba(45, 212, 191, 0.15)'
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <style>
        body { font-family: 'Inter', sans-serif; }
        section { scroll-margin-top: 96px; }
    </style>
</head>

<body id="top" class="bg-brand-bg text-white">

    <!-- Top Bar -->
    <div class="bg-black/30 border-b border-white/5">
        <div class="container mx-auto px-4 py-2 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-sm text-gray-200">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-phone text-brand-accent"></i>
                <a href="tel:13108508093" class="hover:text-brand-accent transition">(310) 850-8093</a>
                <span class="opacity-60 hidden sm:inline">•</span>
                <i class="fa-solid fa-envelope text-brand-accent hidden sm:inline"></i>
                <a href="mailto:support@westlacomputerexpert.tech" class="hover:text-brand-accent transition hidden sm:inline">support@westlacomputerexpert.tech</a>
            </div>
            <div class="text-gray-300">
                Hours: <span class="font-semibold text-white">Daily 9am–10pm</span> • Sunday <span class="font-semibold text-white">10am–9pm</span>
            </div>
        </div>
    </div>

    <!-- Nav -->
    <nav class="sticky top-0 z-50 backdrop-blur bg-brand-bg/80 border-b border-white/5">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-brand-card border border-white/10 grid place-items-center shadow-glow">
                    <i class="fa-solid fa-screwdriver-wrench text-brand-accent"></i>
                </div>
                <div>
                    <div class="font-extrabold tracking-tight text-lg">West LA Computer Expert</div>
                    <div class="text-xs text-brand-muted">On-site + Remote Support</div>
                </div>
            </div>

            <div class="hidden md:flex items-center space-x-8 text-sm font-medium text-gray-300">
                <a href="#top" class="hover:text-brand-accent transition">Home</a>
                <a href="#services" class="hover:text-brand-accent transition">Services</a>
                <a href="#reviews" class="hover:text-brand-accent transition">Reviews</a>
                <a href="#faq" class="hover:text-brand-accent transition">FAQ</a>
                <a href="#contact" class="hover:text-brand-accent transition">Contact</a>
            </div>

            <div class="flex items-center gap-3">
                <button onclick="toggleVoice()" class="px-4 py-2 rounded-lg bg-brand-card border border-white/10 hover:border-brand-accent/60 hover:shadow-glow transition text-sm font-semibold">
                    <i class="fa-solid fa-microphone text-brand-accent"></i> Voice Assist
                </button>
                <a href="#contact" class="px-4 py-2 rounded-lg bg-brand-accent text-brand-bg font-bold hover:bg-teal-300 transition text-sm">
                    Get Help
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="relative overflow-hidden">
        <div class="absolute inset-0 opacity-30">
            <div class="absolute -top-40 -left-40 w-[520px] h-[520px] rounded-full bg-brand-accent blur-3xl opacity-20"></div>
            <div class="absolute -bottom-40 -right-40 w-[520px] h-[520px] rounded-full bg-white blur-3xl opacity-10"></div>
        </div>

        <div class="container mx-auto px-4 py-16 md:py-24 relative">
            <div class="grid md:grid-cols-2 gap-10 items-center">
                <div>
                    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-card border border-white/10 text-sm text-gray-200">
                        <i class="fa-solid fa-bolt text-brand-accent"></i>
                        Fast help — On-site in West LA + Remote anywhere
                    </div>

                    <h1 class="text-4xl md:text-5xl font-extrabold leading-tight mt-5">
                        Fix your computer <span class="text-brand-accent">today</span> — without the stress.
                    </h1>

                    <p class="text-gray-300 text-lg mt-4 max-w-xl">
                        Slow PC? Wi-Fi problems? Printer won’t connect? I’ll troubleshoot and fix it quickly — either at your home/office or remotely.
                    </p>

                    <div class="flex flex-col sm:flex-row gap-3 mt-8">
                        <a href="tel:13108508093" class="px-7 py-4 rounded-lg bg-brand-accent text-brand-bg font-bold hover:bg-teal-300 transition text-center">
                            <i class="fa-solid fa-phone"></i> Call (310) 850-8093
                        </a>
                        <a href="#contact" class="px-7 py-4 rounded-lg bg-brand-card border border-white/10 hover:border-brand-accent/60 transition text-center font-semibold">
                            <i class="fa-solid fa-paper-plane text-brand-accent"></i> Send a Request
                        </a>
                    </div>

                    <div class="grid grid-cols-3 gap-4 mt-10">
                        <div class="bg-brand-card border border-white/10 rounded-xl p-4">
                            <div class="text-brand-accent text-xl font-extrabold">20+ yrs</div>
                            <div class="text-gray-300 text-sm">Experience</div>
                        </div>
                        <div class="bg-brand-card border border-white/10 rounded-xl p-4">
                            <div class="text-brand-accent text-xl font-extrabold">On-site</div>
                            <div class="text-gray-300 text-sm">West LA</div>
                        </div>
                        <div class="bg-brand-card border border-white/10 rounded-xl p-4">
                            <div class="text-brand-accent text-xl font-extrabold">Remote</div>
                            <div class="text-gray-300 text-sm">Same-day</div>
                        </div>
                    </div>
                </div>

                <div class="bg-brand-card border border-white/10 rounded-2xl p-8 shadow-glow">
                    <h2 class="text-2xl font-bold">Quick Estimate</h2>
                    <p class="text-gray-300 mt-2">Tell me what’s going on — I’ll reply fast.</p>

                    <ul class="mt-6 space-y-3 text-gray-200">
                        <li class="flex items-start gap-3">
                            <i class="fa-solid fa-check text-brand-accent mt-1"></i>
                            <span>PC/Mac repair, tune-ups, upgrades</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fa-solid fa-check text-brand-accent mt-1"></i>
                            <span>Wi-Fi + router + printer setup</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fa-solid fa-check text-brand-accent mt-1"></i>
                            <span>Virus/malware cleanup + security</span>
                        </li>
                    </ul>

                    <div class="mt-8">
                        <a href="#contact" class="w-full inline-block text-center px-6 py-4 rounded-lg bg-brand-accent text-brand-bg font-bold hover:bg-teal-300 transition">
                            Get Help Now
                        </a>
                        <div class="text-xs text-gray-400 mt-3">
                            Open daily 9am–10pm • Sunday 10am–9pm
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Services -->
    <section id="services" class="py-20 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white">Services</h2>
                <p class="text-gray-300 mt-3 max-w-2xl mx-auto">On-site help in West LA and fast remote support for everything from slow PCs to Wi-Fi issues.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-brand-card p-6 rounded-xl border border-gray-700">
                    <div class="text-brand-accent text-3xl mb-4"><i class="fas fa-laptop-medical"></i></div>
                    <h3 class="text-xl font-bold text-white mb-2">PC & Mac Repair</h3>
                    <p class="text-gray-300">Slow computer, crashes, blue screens, storage upgrades, and tune-ups.</p>
                </div>

                <div class="bg-brand-card p-6 rounded-xl border border-gray-700">
                    <div class="text-brand-accent text-3xl mb-4"><i class="fas fa-wifi"></i></div>
                    <h3 class="text-xl font-bold text-white mb-2">Wi-Fi & Networking</h3>
                    <p class="text-gray-300">Router setup, dead zones, mesh systems, printer sharing, smart home issues.</p>
                </div>

                <div class="bg-brand-card p-6 rounded-xl border border-gray-700">
                    <div class="text-brand-accent text-3xl mb-4"><i class="fas fa-shield-halved"></i></div>
                    <h3 class="text-xl font-bold text-white mb-2">Security & Cleanup</h3>
                    <p class="text-gray-300">Virus/malware removal, backups, account recovery guidance, and hardening.</p>
                </div>
            </div>

            <div class="text-center mt-10">
                <a href="#contact" class="px-8 py-4 bg-brand-accent text-brand-bg font-bold rounded-lg hover:bg-teal-300 transition inline-block">Request Help</a>
            </div>
        </div>
    </section>

    <!-- Reviews -->
    <section id="reviews" class="py-20 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white">Customer Reviews</h2>
                <p class="text-gray-300 mt-3 max-w-2xl mx-auto">Fast, friendly, and effective support — on-site or remote.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-brand-card border border-white/10 rounded-2xl p-6">
                    <div class="flex items-center gap-1 text-brand-accent">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                    </div>
                    <p class="text-gray-200 mt-4">“Daniel fixed my Wi-Fi and printer issues in one visit. Super professional and patient.”</p>
                    <div class="text-gray-400 text-sm mt-4">— West LA</div>
                </div>

                <div class="bg-brand-card border border-white/10 rounded-2xl p-6">
                    <div class="flex items-center gap-1 text-brand-accent">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                    </div>
                    <p class="text-gray-200 mt-4">“Remote session was quick and easy. My laptop is finally fast again.”</p>
                    <div class="text-gray-400 text-sm mt-4">— Santa Monica</div>
                </div>

                <div class="bg-brand-card border border-white/10 rounded-2xl p-6">
                    <div class="flex items-center gap-1 text-brand-accent">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                    </div>
                    <p class="text-gray-200 mt-4">“Saved me after a scary virus pop-up. Explained everything clearly.”</p>
                    <div class="text-gray-400 text-sm mt-4">— Culver City</div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="py-20 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white">FAQ</h2>
                <p class="text-gray-300 mt-3 max-w-2xl mx-auto">Quick answers to common questions.</p>
            </div>

            <div class="max-w-3xl mx-auto space-y-4">
                <details class="bg-brand-card border border-white/10 rounded-xl p-5">
                    <summary class="cursor-pointer font-semibold">Do you do on-site visits?</summary>
                    <p class="text-gray-300 mt-3">Yes — West LA and nearby areas. I also offer remote support for many issues.</p>
                </details>

                <details class="bg-brand-card border border-white/10 rounded-xl p-5">
                    <summary class="cursor-pointer font-semibold">What are your hours?</summary>
                    <p class="text-gray-300 mt-3">Daily 9am–10pm. Sunday 10am–9pm.</p>
                </details>

                <details class="bg-brand-card border border-white/10 rounded-xl p-5">
                    <summary class="cursor-pointer font-semibold">Can you help the same day?</summary>
                    <p class="text-gray-300 mt-3">Often yes — especially for remote support. Use the contact form to request help.</p>
                </details>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="py-20 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white">Contact</h2>
                <p class="text-gray-300 mt-3 max-w-2xl mx-auto">Send a request and I’ll get back to you quickly.</p>
            </div>

            <div class="max-w-3xl mx-auto bg-brand-card border border-white/10 rounded-2xl p-8">
                <form id="lead-form" name="lead" method="POST" data-netlify="true" class="space-y-5">
                    <input type="hidden" name="form-name" value="lead" />

                    <div class="grid md:grid-cols-2 gap-5">
                        <div>
                            <label class="text-sm text-gray-300">Name</label>
                            <input name="name" required class="mt-1 w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-accent" placeholder="Your name" />
                        </div>
                        <div>
                            <label class="text-sm text-gray-300">Phone</label>
                            <input name="phone" required class="mt-1 w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-accent" placeholder="(310) 555-1234" />
                        </div>
                    </div>

                    <div>
                        <label class="text-sm text-gray-300">Email</label>
                        <input name="email" type="email" required class="mt-1 w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-accent" placeholder="you@email.com" />
                    </div>

                    <div>
                        <label class="text-sm text-gray-300">Message</label>
                        <textarea name="message" rows="5" required class="mt-1 w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-accent" placeholder="Tell me what's going on..."></textarea>
                    </div>

                    <button type="submit" class="w-full px-6 py-4 rounded-lg bg-brand-accent text-brand-bg font-bold hover:bg-teal-300 transition">
                        Send Request
                    </button>

                    <div class="text-xs text-gray-400 text-center">
                        Or call <a class="text-brand-accent hover:underline" href="tel:13108508093">(310) 850-8093</a> • Email
                        <a class="text-brand-accent hover:underline" href="mailto:support@westlacomputerexpert.tech">support@westlacomputerexpert.tech</a>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Voice overlay -->
    <div id="voice-overlay" class="hidden fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm">
        <div class="min-h-full flex items-center justify-center p-6">
            <div class="w-full max-w-xl bg-brand-card border border-white/10 rounded-2xl p-6 shadow-glow">
                <div class="flex items-center justify-between">
                    <div class="font-bold text-lg">Voice Assist</div>
                    <button onclick="toggleVoice()" class="text-gray-300 hover:text-white">
                        <i class="fa-solid fa-xmark text-xl"></i>
                    </button>
                </div>

                <p class="text-gray-300 mt-3">Speak naturally. Say “cancel” to stop.</p>

                <div class="mt-6 bg-black/25 border border-white/10 rounded-xl p-4">
                    <div id="voice-transcript" class="text-gray-200">AI: "Click the mic and start speaking."</div>
                </div>

                <div class="mt-5 flex gap-2">
                    <input id="manual-input" class="flex-1 bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-accent" placeholder="Or type here…" />
                    <button onclick="handleInput(document.getElementById('manual-input').value)" class="px-5 py-3 rounded-lg bg-brand-accent text-brand-bg font-bold hover:bg-teal-300 transition">
                        Send
                    </button>
                </div>

                <div class="mt-5 text-xs text-gray-400">
                    Tip: If you prefer, just close this and type directly into the form — voice won’t overwrite your typing.
                </div>
            </div>
        </div>
    </div>

    <footer class="py-10 border-t border-white/5 text-center text-gray-400 text-sm">
        © <span id="year"></span> West LA Computer Expert • On-site + Remote Support
    </footer>

    <script>
        document.getElementById('year').innerText = new Date().getFullYear();

        let socket, mediaRecorder, micStream, intakeStep = 0;

        async function getDeepgramToken() {
            const r = await fetch('/.netlify/functions/deepgram-token');
            if (!r.ok) throw new Error('Token fetch failed');
            const data = await r.json();
            return data.access_token;
        }

        // Prevent the mic from "hearing" the AI's own voice and looping
        let aiSpeaking = false;

        // Prevent AI from overwriting fields the user is typing into
        const userEdited = { name: false, phone: false, email: false, message: false };

        const intakeData = { name: '', phone: '', email: '', location: '', device: '', issue: '' };

        const ui = {
            overlay: document.getElementById('voice-overlay'),
            transcript: document.getElementById('voice-transcript'),
            manual: document.getElementById('manual-input'),
            fName: document.querySelector('input[name="name"]'),
            fPhone: document.querySelector('input[name="phone"]'),
            fEmail: document.querySelector('input[name="email"]'),
            fMsg: document.querySelector('textarea[name="message"]')
        };

        // Mark fields as user-edited when they type
        ui.fName.addEventListener('input', () => userEdited.name = true);
        ui.fPhone.addEventListener('input', () => userEdited.phone = true);
        ui.fEmail.addEventListener('input', () => userEdited.email = true);
        ui.fMsg.addEventListener('input', () => userEdited.message = true);

        function safeSet(fieldKey, el, value) {
            // Only fill if user hasn't started editing, or the field is empty
            if (!userEdited[fieldKey] || !el.value) el.value = value;
        }

        async function toggleVoice() {
            if (ui.overlay.classList.contains('hidden')) {
                ui.overlay.classList.remove('hidden');
                // Do NOT clear the form — that was wiping your typing.
                intakeStep = 0;
                await startStreaming();
            } else {
                ui.overlay.classList.add('hidden');
                stopStreaming();
            }
        }

        async function startStreaming() {
            try {
                micStream = await navigator.mediaDevices.getUserMedia({
                    audio: { echoCancellation: true, noiseSuppression: true, autoGainControl: true }
                });

                const jwt = await getDeepgramToken();

                socket = new WebSocket(
                    'wss://api.deepgram.com/v1/listen?punctuate=true&model=nova-2&smart_format=true',
                    ['token', jwt]
                );

                socket.onopen = () => {
                    mediaRecorder = new MediaRecorder(micStream, { mimeType: 'audio/webm' });
                    mediaRecorder.addEventListener('dataavailable', e => {
                        if (e.data.size > 0 && socket.readyState === 1) socket.send(e.data);
                    });
                    mediaRecorder.start(250);

                    speak("Hi! Tell me briefly what the problem is, or type into the form.");
                };

                socket.onmessage = (msg) => {
                    if (aiSpeaking) return;

                    const received = JSON.parse(msg.data);
                    const transcript = received.channel?.alternatives?.[0]?.transcript;

                    if (received.is_final && transcript && transcript.trim().length > 1) {
                        ui.transcript.innerText = `You: "${transcript}"`;
                        processLogic(transcript.trim());
                    }
                };

                socket.onerror = () => {
                    ui.transcript.innerText = 'AI: "Connection error. Try again."';
                };
           } catch (e) {
          // This will tell us the EXACT problem (e.g., "Device in use" or "ReferenceError")
             alert("REAL ERROR: " + e.name + ": " + e.message);
           }

        function stopStreaming() {
            try {
                if (mediaRecorder && mediaRecorder.state !== 'inactive') mediaRecorder.stop();
                if (socket) socket.close();
                if (micStream) micStream.getTracks().forEach(t => t.stop());
            } catch (e) {}
        }

        function processLogic(text) {
            const lower = text.toLowerCase();

            if (lower.includes("cancel")) {
                intakeStep = 0;
                speak("Cancelled. You can type in the form normally.");
                return;
            }

            switch (intakeStep) {
                case 0:
                    intakeStep = 1;
                    speak("To start, what's your first name?");
                    document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
                    break;

                case 1:
                    intakeData.name = text;
                    safeSet('name', ui.fName, text);
                    intakeStep = 2;
                    speak(`Thanks, ${text}. What's your phone number?`);
                    break;

                case 2:
                    intakeData.phone = text;
                    safeSet('phone', ui.fPhone, text);
                    intakeStep = 3;
                    speak("Got it. What's your email address?");
                    break;

                case 3:
                    // Accept email from speech, but don't fight the user's typing
                    if (text.includes("@") || lower.includes(" at ")) {
                        intakeData.email = text.replace(/\s+at\s+/i, "@").replace(/\s/g, "");
                        safeSet('email', ui.fEmail, intakeData.email);
                    } else if (ui.fEmail.value.includes('@')) {
                        intakeData.email = ui.fEmail.value;
                    }
                    intakeStep = 4;
                    speak("What area are you in? West LA, Santa Monica, Culver City, etc.");
                    break;

                case 4:
                    intakeData.location = text;
                    intakeStep = 5;
                    speak("What device is having the problem? For example: laptop, desktop, iMac.");
                    break;

                case 5:
                    intakeData.device = text;
                    intakeStep = 6;
                    speak("Briefly, what is the issue?");
                    break;

                case 6:
                    intakeData.issue = text;

                    const summary =
                        `[AI Intake]\n` +
                        `Name: ${intakeData.name}\n` +
                        `Phone: ${intakeData.phone}\n` +
                        `Email: ${intakeData.email}\n` +
                        `Location: ${intakeData.location}\n` +
                        `Device: ${intakeData.device}\n` +
                        `Issue: ${intakeData.issue}`;

                    safeSet('message', ui.fMsg, summary);
                    intakeStep = 0;
                    speak("All set. Review the form and click Send Request.");
                    stopStreaming();
                    break;
            }
        }

        function speak(text) {
            ui.transcript.innerText = `AI: "${text}"`;
            window.speechSynthesis.cancel();

            const u = new SpeechSynthesisUtterance(text);
            aiSpeaking = true;
            u.onend = () => { aiSpeaking = false; };
            u.onerror = () => { aiSpeaking = false; };

            window.speechSynthesis.speak(u);
        }

        function handleInput(val) {
            const v = (val || "").trim();
            if (!v) return;
            ui.transcript.innerText = `You: "${v}"`;
            processLogic(v);
            ui.manual.value = '';
        }

        // Netlify form handler (x-www-form-urlencoded)
        document.getElementById('lead-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const fd = new FormData(form);
            const body = new URLSearchParams(fd);

            fetch('/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: body.toString()
            })
            .then(() => {
                alert("Request Sent!");
                form.reset();
                userEdited.name = userEdited.phone = userEdited.email = userEdited.message = false;
            })
            .catch(() => {
                alert("Could not send (network error). Please call (310) 850-8093.");
            });
        });
    </script>
</body>
</html>
